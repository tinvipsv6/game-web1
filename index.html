<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Game Né Hình Vuông</title>
<style>
  body { margin: 0; overflow: hidden; background: #111; }
  canvas { display: block; margin: auto; background: #222; }
</style>
</head>
<body>

<canvas id="game" width="500" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 230, y: 350, w: 40, h: 40 };
let enemy = { x: Math.random()*460, y: 0, w: 40, h: 40, speed: 3 };
let score = 0;

document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") player.x -= 20;
  if (e.key === "ArrowRight") player.x += 20;
});

function update() {
  enemy.y += enemy.speed;

  // chạm đất → reset
  if (enemy.y > 400) {
    enemy.y = 0;
    enemy.x = Math.random()*460;
    score++;
  }

  // va chạm
  if (
    player.x < enemy.x + enemy.w &&
    player.x + player.w > enemy.x &&
    player.y < enemy.y + enemy.h &&
    player.y + player.h > enemy.y
  ) {
    alert("Game Over! Điểm: " + score);
    location.reload();
  }
}

function draw() {
  ctx.clearRect(0, 0, 500, 400);

  ctx.fillStyle = "lime";
  ctx.fillRect(player.x, player.y, player.w, player.h);

  ctx.fillStyle = "red";
  ctx.fillRect(enemy.x, enemy.y, enemy.w, enemy.h);

  ctx.fillStyle = "white";
  ctx.fillText("Score: " + score, 10, 20);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
